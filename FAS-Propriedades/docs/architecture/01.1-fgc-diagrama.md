# 01.1 — Diagramas (Mermaid) — FGC

Os diagramas abaixo representam o fluxo **request → controller → application → infra → persistência/integrações**, conforme implementado nos projetos FGC.

## FCG - Usuarios

```mermaid
flowchart LR
  Client["Cliente/Frontend"] -->|"HTTP + JWT"| Api["FCG.API"]
  Api -->|"Controllers"| Ctl["Controllers (BaseController)"]
  Ctl -->|"IUsuarioService / IAuthenticate"| App["FCG.Application (Services)"]
  App -->|"Repositories + UoW"| Data["FCG.Infra.Data"]
  Data -->|"EF Core DbContext"| Sql["SQL Server"]
  Api -->|"ExceptionMiddleware"| Err["ApiException JSON"]
```

## FCG - Pagamentos

```mermaid
flowchart LR
  Client["Cliente/Serviço chamador"] -->|"HTTP + JWT"| Api["FCG.API"]
  Api -->|"Controllers"| Ctl["Controllers (BaseController)"]
  Ctl -->|"IPagamentoService"| App["FCG.Application (Services)"]
  App -->|"Repositories + UoW"| Data["FCG.Infra.Data"]
  Data -->|"EF Core DbContext"| Sql["SQL Server"]

  Rabbit["RabbitMQ"] -->|"fcg.pagamentos.solicitado"| Mt["MassTransit Consumer"]
  Mt -->|"IPagamentoService"| App

  App -->|"HttpClient"| Fn["Azure Function (externa)"]
```

## FCG - Jogos

```mermaid
flowchart LR
  Client["Cliente/Frontend"] -->|"HTTP + JWT"| Api["FCG.API"]
  Api -->|"OpenTelemetry"| Otel["Tracing/Spans"]
  Api -->|"Controllers"| Ctl["Controllers (BaseController)"]
  Ctl -->|"IJogoService/ICompraService"| App["FCG.Application (Services)"]
  App -->|"Repositories + UoW"| Data["FCG.Infra.Data"]
  Data -->|"EF Core DbContext"| Sql["SQL Server"]

  App -->|"IElasticClient"| Es["Elasticsearch"]
  Api -->|"ElasticsearchInitializationMiddleware"| Es

  Rabbit["RabbitMQ"] -->|"pagamentos.aprovado/recusado"| Mt["MassTransit Consumers"]
  Mt -->|"Atualizações de domínio"| App
```

